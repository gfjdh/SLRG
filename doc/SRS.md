## 《专叶跑团》软件需求规格说明书（SRS）

    斜体为需写入具体样板

### 一.功能需求

#### 1 系统功能

**主要功能：**
- ***生成地图关卡***
- ***确定难度***
- 抽取行动顺序
- ***判断并进入战斗***
- ***场景效果触发***
- ***藏品效果触发***
- 玩家姿态触发
- ***怪物逻辑***
- ***战斗结束结算***

**时序逻辑**
1. 房主创建房间
2. 抽取行动顺序
3. 进入玩家回合
    1. 选择事件
    2. 进行事件选择
    3. 执行事件结果
    4. 判断战斗
        1. 进入战斗
        2. 生成关卡固定敌人
        3. 抽取随机突发敌人
        4. 结算场景效果，玩家姿态，藏品效果触发
            1. 改变姿态
            2. 选择技能
        5. 判断怪物/玩家死亡
        6. 战斗结束
        7. 结算奖励
    5. 事件结束
    6. 单局游戏结束与否（结算）
    7. 结束玩家回合

#### 2 功能建模

**SLRG-001 ==生成地图关卡==**

    此处仅包含地图总览，即战斗，事件，商店等
    敌怪属性，事件选项等在对应位置

##### 地图整体概述

- 整个地图由六层组成，
- 三五层为boss层，第三层最终一定通往小boos，第五层一定通往最终boss
- 六层为隐藏boss层，最终一定通往隐藏boss
- 一四层为判定层，满足深入要求之一即强制进入下一层
- 二层为发育层，在除第一个以外的结点进入商店并离开后即进入下一层
- （表现为随机到商店即停止继续随机后续地图，且保证第二层有且仅有最后为商店，其它层不限）

**SLRG-002 抽取行动顺序**

- 随机排列玩家行动顺序（此顺序仅决定玩家选择事件顺序，不决定局内顺序），对于仅能选择一条路线（如boos关，二层商店关，即延续到下次选择）

**SLRG-003 ==判断并进入战斗==**

    此处仅包含战斗与对应敌怪的对应关系

- 由玩家选择，事件触发或对应层关底强制触发

**SLRG-004 ==场景效果触发==**

    此处仅包含场景效果

- 每进入新的一层，都将获得（对应层数-1）/2+难度影响的场景效果，同时去除上一层的场景效果（除去永久影响或延时影响）

**SLRG-005 ==藏品效果触发==**

    此处仅包含场景

- 在每回合开始前，更新当前藏品效果

**SLRG-006 玩家姿态触发**

- 仅在玩家自身回合开始前，玩家被强制要求选择姿态，此姿态持续到下次自身回合
- 部分姿态强制转换为某些姿态
- 部分姿态有使用冷却不可选取

**SLRG-007 ==怪物逻辑==**

    此处仅包含敌怪属性

**SLRG-008 ==战斗结束结算==**

    此处仅包含大类战斗所对应奖励

- 战斗结束，玩家获得奖励：藏品，模块，某些效果，属性加点

#### 3 玩家行为

**玩家行为**
-  玩家登录注册
-  创建加入房间
-  ==选择难度==
-  开始游戏
-  查看藏品（随时）
-  查看地图路线/属性加点（战斗外随时进行）
-  ==选择路线==
-  选择事件分支
-  查看怪物属性（战斗中随时）
-  ==改变姿态（仅在战斗中且自己回合开始）==
-  ==编辑技能（战斗中且不在自己回合）==
-  ==属性加点（战斗外随时）==

**大致流程：**
1. 登录注册
2. 创建房间或加入房间
3. 选择难度
4. 等待游戏开始
   - 等待自身回合
      - 查看藏品
      - 查看地图路线
      - 查看属性（加点）
   - 自身回合选择路线
      - 查看藏品
      - 查看地图路线
      - 查看属性（加点）
      - 触发事件选择选项
      - 触发战斗
        - 等待自身回合
          - 查看怪物属性
          - 查看藏品
          - 编辑技能
        - 自身回合（强制）选择姿态后使用技能 
        - 战斗结束
          - 抽取藏品/模块
          - 属性加点

#### 4 行为建模

**SLRG-101 玩家登录注册**
**SLRG-102 创建加入房间**
**SLRG-103 ==选择难度==**
**SLRG-104 开始游戏**
**SLRG-105 查看藏品（随时）**
**SLRG-106 查看地图路线/属性加点（战斗外随时进行）**
**SLRG-107 ==选择路线==**
**SLRG-108 选择事件分支**
**SLRG-109 查看怪物属性（战斗中随时）**
**SLRG-110 ==改变姿态（仅在战斗中且自己回合开始）==**
**SLRG-111 ==编辑技能（战斗中且不在自己回合）==**
**SLRG-112 ==属性加点（战斗外随时）==**

#### 5 其余功能

#### 6 阿巴阿巴